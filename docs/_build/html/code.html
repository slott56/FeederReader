<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Code &#8212; RSS FDRDR 2024.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=4f649999" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css?v=039e1c02" />
    <script src="_static/documentation_options.js?v=db884f6e"></script>
    <script src="_static/doctools.js?v=888ff710"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Install" href="install.html" />
    <link rel="prev" title="Components" href="components.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="code">
<h1>Code<a class="headerlink" href="#code" title="Link to this heading">¶</a></h1>
<section id="infrastructure">
<h2>Infrastructure<a class="headerlink" href="#infrastructure" title="Link to this heading">¶</a></h2>
<p>The overall configuration and infrastructure is implemented by the <cite>Common</cite> module.</p>
<section id="module-common">
<span id="common"></span><h3>Common<a class="headerlink" href="#module-common" title="Link to this heading">¶</a></h3>
<p>Common functions and classes used throughout Feeder Reader.</p>
<p>There are three functions in this module to get configuration
information from a variety of places.</p>
<figure class="align-default">
<img alt="https://www.plantuml.com/plantuml/svg/SoWkIImgAStDuU9ApaaiBbP8Jos9Xx1iR1Gqt7GKyekICp9JD1NSIlEIIpBpynJixA1AK_FAuaiIat9I2Ii5cvgVbvQPZazjVb9MQdA9WekhcsEeJqWm5nUIDbrTEuI5N0XNOX57Q42O1BGhLI4rjw2aKY4tDJSfjQYOYyiXDIy5w7C0" src="https://www.plantuml.com/plantuml/svg/SoWkIImgAStDuU9ApaaiBbP8Jos9Xx1iR1Gqt7GKyekICp9JD1NSIlEIIpBpynJixA1AK_FAuaiIat9I2Ii5cvgVbvQPZazjVb9MQdA9WekhcsEeJqWm5nUIDbrTEuI5N0XNOX57Q42O1BGhLI4rjw2aKY4tDJSfjQYOYyiXDIy5w7C0" />
</figure>
<p>There’s a hierarchy to the configuration data:</p>
<ul class="simple">
<li><p>Environment variables.</p>
<ul>
<li><p>All of the <code class="docutils literal notranslate"><span class="pre">AWS_</span></code> environment variables</p></li>
<li><p>All of the <code class="docutils literal notranslate"><span class="pre">LAMBDA_</span></code> environment variables</p></li>
<li><p>All of the <code class="docutils literal notranslate"><span class="pre">FDRDR_</span></code> environment variables</p></li>
</ul>
</li>
<li><p>The user’s private <code class="docutils literal notranslate"><span class="pre">~fdrdr_config.toml</span></code>.</p></li>
<li><p>The local <code class="docutils literal notranslate"><span class="pre">config.toml</span></code>.</p></li>
<li><p>The built-in defaults in this module.</p></li>
</ul>
<p>See <a class="reference external" href="https://docs.aws.amazon.com/lambda/latest/dg/configuration-envvars.html#configuration-envvars-runtime">https://docs.aws.amazon.com/lambda/latest/dg/configuration-envvars.html#configuration-envvars-runtime</a>
for standard AWS environment variable names.</p>
<dl class="py function">
<dt class="sig sig-object py" id="common.get_class">
<span class="sig-prename descclassname"><span class="pre">common.</span></span><span class="sig-name descname"><span class="pre">get_class</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cls</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#common.get_class" title="Link to this definition">¶</a></dt>
<dd><p>Map a generic class to a specific implementation class, if there are choices.
This generally applies to <a class="reference internal" href="#storage.Storage" title="storage.Storage"><code class="xref py py-class docutils literal notranslate"><span class="pre">storage.Storage</span></code></a> and <a class="reference internal" href="#notification.Notification" title="notification.Notification"><code class="xref py py-class docutils literal notranslate"><span class="pre">notification.Notification</span></code></a>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">CONFIG</span></code> mapping dictinary has environments and class mappings.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>cls</strong> (<em>type</em>) – An abstract super class with an environment-specific implementation.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>an implementation class, based on the environment.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>type</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="common.env_table">
<span class="sig-prename descclassname"><span class="pre">common.</span></span><span class="sig-name descname"><span class="pre">env_table</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#common.env_table" title="Link to this definition">¶</a></dt>
<dd><p>Get environment variables and create TOML-like tables.</p>
<p><code class="docutils literal notranslate"><span class="pre">AWS_REGION</span> <span class="pre">=</span> <span class="pre">&quot;us-east-1&quot;</span></code> is treated like the following TOML</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[AWS]</span>
<span class="w">    </span><span class="n">REGION</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;us-east-1&quot;</span>
</pre></div>
</div>
<p>The envvar name is decomposed into a table and a name within the table.</p>
<p>This looks for variable names that begin with <code class="docutils literal notranslate"><span class="pre">&quot;AWS_&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;LAMBDA_&quot;</span></code>. or <code class="docutils literal notranslate"><span class="pre">&quot;FDRDR_&quot;</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>dict[str, <em>Any</em>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="common.get_config">
<span class="sig-prename descclassname"><span class="pre">common.</span></span><span class="sig-name descname"><span class="pre">get_config</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">section</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#common.get_config" title="Link to this definition">¶</a></dt>
<dd><p>Read the config files, if present and merge in the reults of the <a class="reference internal" href="#common.env_table" title="common.env_table"><code class="xref py py-func docutils literal notranslate"><span class="pre">env_table()</span></code></a> function.</p>
<p>Here are the tiers of overrides:</p>
<ul class="simple">
<li><p>Any overrides from the <code class="docutils literal notranslate"><span class="pre">section</span></code> parameter are seen first. These should come from the command line.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">~/fdrdr_config.toml</span></code>. This usually has a <code class="docutils literal notranslate"><span class="pre">[[notifier.smtp]]</span></code> table with user credentials.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">config.toml</span></code> from the current working directory.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">DEFAULTS</span></code> in this module.</p></li>
</ul>
<p>Use a call like this to provide overrides from the command line:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">common</span><span class="o">.</span><span class="n">get_config</span><span class="p">(</span><span class="n">writer</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;format&#39;</span><span class="p">:</span> <span class="s1">&#39;csv&#39;</span><span class="p">})</span>
</pre></div>
</div>
<p>to override the config file with command-line options.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>section</strong> (<em>dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em>) – A specific table within the TOML file to inject overrides.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The complete configuration.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>dict[str, <em>Any</em>]</p>
</dd>
</dl>
</dd></dl>

</section>
</section>
<section id="storage-and-notification">
<h2>Storage and Notification<a class="headerlink" href="#storage-and-notification" title="Link to this heading">¶</a></h2>
<p>The structure of RSS entries is defined by the <a class="reference internal" href="#model">Model</a> module.</p>
<p>Storage has a number of implementations in the <a class="reference internal" href="#storage">Storage</a> module.</p>
<p>Messaging, also, has a number of implementations in the <a class="reference internal" href="#notification">Notification</a> module.</p>
<section id="module-model">
<span id="model"></span><h3>Model<a class="headerlink" href="#module-model" title="Link to this heading">¶</a></h3>
<p>Data Model for the Feeder Reader.</p>
<figure class="align-default">
<img alt="https://www.plantuml.com/plantuml/svg/bLBBQiCm4BplLuXSqfQQqAi99JIz5DfBIyv1iRQ9Y1v6MaD3cd_lMdxK9Y4G7GmQPcPdnrf4ae4gQm0ARqllq94e3qewqeKuWk1J61cZU94HFxn20wSXrzOG4w5XlH7QLaQQ3EOYKaXNezq-5wlFztHJ68kWIzBU_LFAQhDMabXKVqbRX8GVEIJ7EOdluEsQvFRknvfxpj5d4lFVB4l3ko3BdNGk9RkQvIR_rXEWCtzWSFBqQ2UZqQklfQy23QfGljWZ3HRbpZN61hWfmi0R84quXyzIl299tLMX6SX7WlIFcutoViThani_WE6YyqiKCPkAB7iUDJATzVLTrjIdrNL4rl2Zssc50cr91s7HRZ14W0KwnQ_t3m==" src="https://www.plantuml.com/plantuml/svg/bLBBQiCm4BplLuXSqfQQqAi99JIz5DfBIyv1iRQ9Y1v6MaD3cd_lMdxK9Y4G7GmQPcPdnrf4ae4gQm0ARqllq94e3qewqeKuWk1J61cZU94HFxn20wSXrzOG4w5XlH7QLaQQ3EOYKaXNezq-5wlFztHJ68kWIzBU_LFAQhDMabXKVqbRX8GVEIJ7EOdluEsQvFRknvfxpj5d4lFVB4l3ko3BdNGk9RkQvIR_rXEWCtzWSFBqQ2UZqQklfQy23QfGljWZ3HRbpZN61hWfmi0R84quXyzIl299tLMX6SX7WlIFcutoViThani_WE6YyqiKCPkAB7iUDJATzVLTrjIdrNL4rl2Zssc50cr91s7HRZ14W0KwnQ_t3m==" />
</figure>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A docket number may be composed of a number or letter indicating the court,
a two-digit number to identify the year,
the case type (either CV/cv for civil cases or CR/cr for criminal cases),
a four- or five-digit case number, and the judge’s initials.</p>
<p>For example, 1:21-cv-5678-MW is the docket number for the 5,678th civil case filed in the year 2021 and assigned to court number 1 and the Honorable Martha Washington.</p>
</div>
<dl class="py class">
<dt class="sig sig-object py" id="model.Channel">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">model.</span></span><span class="sig-name descname"><span class="pre">Channel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">link</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#model.Channel" title="Link to this definition">¶</a></dt>
<dd><p>The channel definition from the RSS source.</p>
<p>For example,</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;rss</span><span class="w"> </span><span class="na">version=</span><span class="s">&quot;2.0&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;channel&gt;</span>
<span class="nt">&lt;title&gt;</span>Eastern<span class="w"> </span>District<span class="w"> </span>of<span class="w"> </span>New<span class="w"> </span>York<span class="w"> </span>Filings<span class="w"> </span>Entries<span class="w"> </span>on<span class="w"> </span>cases<span class="nt">&lt;/title&gt;</span>
<span class="nt">&lt;link&gt;</span>https://ecf.nyed.uscourts.gov<span class="nt">&lt;/link&gt;</span>
<span class="nt">&lt;description&gt;</span>Public<span class="w"> </span>Filings<span class="w"> </span>in<span class="w"> </span>the<span class="w"> </span>last<span class="w"> </span>24<span class="w"> </span>Hours<span class="nt">&lt;/description&gt;</span>
<span class="nt">&lt;lastBuildDate&gt;</span>Thu,<span class="w"> </span>28<span class="w"> </span>Dec<span class="w"> </span>2023<span class="w"> </span>21:20:01<span class="w"> </span>GMT<span class="nt">&lt;/lastBuildDate&gt;</span>
...
<span class="nt">&lt;/channel&gt;</span>
<span class="nt">&lt;/rss&gt;</span>
</pre></div>
</div>
<p>The <a class="reference internal" href="#model.Channel.from_tag" title="model.Channel.from_tag"><code class="xref py py-meth docutils literal notranslate"><span class="pre">from_tag()</span></code></a> method only preserves the title and link
information.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>title</strong> (<em>str</em>) – </p></li>
<li><p><strong>link</strong> (<em>Url</em>) – </p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="model.Channel.title">
<span class="sig-name descname"><span class="pre">title</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#model.Channel.title" title="Link to this definition">¶</a></dt>
<dd><p>RSS feed title</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="model.Channel.link">
<span class="sig-name descname"><span class="pre">link</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Url</span></em><a class="headerlink" href="#model.Channel.link" title="Link to this definition">¶</a></dt>
<dd><p>RSS feed link</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="model.Channel.from_tag">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_tag</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tag</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#model.Channel.from_tag" title="Link to this definition">¶</a></dt>
<dd><p>Extracts the individual field values from the XML tag.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>tag</strong> (<em>Element</em>) – The XML tag for a channel.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>New <a class="reference internal" href="#model.Channel" title="model.Channel"><code class="xref py py-class docutils literal notranslate"><span class="pre">Channel</span></code></a> instance.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#model.Channel" title="model.Channel"><em>Channel</em></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="model.Channel.model_config">
<span class="sig-name descname"><span class="pre">model_config</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">ClassVar</span><span class="p"><span class="pre">[</span></span><span class="pre">ConfigDict</span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{'frozen':</span> <span class="pre">True}</span></em><a class="headerlink" href="#model.Channel.model_config" title="Link to this definition">¶</a></dt>
<dd><p>Configuration for the model, should be a dictionary conforming to [<cite>ConfigDict</cite>][pydantic.config.ConfigDict].</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="model.Channel.model_fields">
<span class="sig-name descname"><span class="pre">model_fields</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">ClassVar</span><span class="p"><span class="pre">[</span></span><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">FieldInfo</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{'link':</span> <span class="pre">FieldInfo(annotation=Url,</span> <span class="pre">required=True),</span> <span class="pre">'title':</span> <span class="pre">FieldInfo(annotation=str,</span> <span class="pre">required=True)}</span></em><a class="headerlink" href="#model.Channel.model_fields" title="Link to this definition">¶</a></dt>
<dd><p>Metadata about the fields defined on the model,
mapping of field names to [<cite>FieldInfo</cite>][pydantic.fields.FieldInfo].</p>
<p>This replaces <cite>Model.__fields__</cite> from Pydantic V1.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="model.Item">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">model.</span></span><span class="sig-name descname"><span class="pre">Item</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">link</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">description</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">text_pub_date</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#model.Item" title="Link to this definition">¶</a></dt>
<dd><p>One item from within a channel extracted from the RSS source.</p>
<p>For example,</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;item&gt;</span>
<span class="nt">&lt;title&gt;</span>
<span class="cp">&lt;![CDATA[ 2:23-cv-09491-PKC-ST Sookra v. Berkeley Carroll School et al ]]&gt;</span>
<span class="nt">&lt;/title&gt;</span>
<span class="nt">&lt;pubDate&gt;</span>Thu,<span class="w"> </span>28<span class="w"> </span>Dec<span class="w"> </span>2023<span class="w"> </span>21:18:55<span class="w"> </span>GMT<span class="nt">&lt;/pubDate&gt;</span>
<span class="nt">&lt;author/&gt;</span>
<span class="nt">&lt;guid</span><span class="w"> </span><span class="na">isPermaLink=</span><span class="s">&quot;true&quot;</span><span class="nt">&gt;</span>https://ecf.nyed.uscourts.gov/cgi-bin/DktRpt.pl?508001<span class="nt">&lt;/guid&gt;</span>
<span class="nt">&lt;description&gt;</span>
<span class="cp">&lt;![CDATA[ [Quality Control Check - Summons] Sookra v. Berkeley Carroll School et al ]]&gt;</span>
<span class="nt">&lt;/description&gt;</span>
<span class="nt">&lt;link&gt;</span>https://ecf.nyed.uscourts.gov/cgi-bin/DktRpt.pl?508001<span class="nt">&lt;/link&gt;</span>
<span class="nt">&lt;/item&gt;</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>title</strong> (<em>str</em>) – </p></li>
<li><p><strong>link</strong> (<em>Url</em>) – </p></li>
<li><p><strong>description</strong> (<em>str</em>) – </p></li>
<li><p><strong>text_pub_date</strong> (<em>str</em>) – </p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="model.Item.title">
<span class="sig-name descname"><span class="pre">title</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#model.Item.title" title="Link to this definition">¶</a></dt>
<dd><p>RSS feed title</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="model.Item.link">
<span class="sig-name descname"><span class="pre">link</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Url</span></em><a class="headerlink" href="#model.Item.link" title="Link to this definition">¶</a></dt>
<dd><p>RSS feed link</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="model.Item.description">
<span class="sig-name descname"><span class="pre">description</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#model.Item.description" title="Link to this definition">¶</a></dt>
<dd><p>RSS feed description</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="model.Item.text_pub_date">
<span class="sig-name descname"><span class="pre">text_pub_date</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#model.Item.text_pub_date" title="Link to this definition">¶</a></dt>
<dd><p>RSS feed publication date</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="model.Item.pub_date">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">pub_date</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">datetime</span></em><a class="headerlink" href="#model.Item.pub_date" title="Link to this definition">¶</a></dt>
<dd><p>Parse the publication date.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="model.Item.parse">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">parse</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tag</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#model.Item.parse" title="Link to this definition">¶</a></dt>
<dd><p>Parse the individual fields to create an interim mapping.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>tag</strong> (<em>Element</em>) – the XML tag</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>a dictionary with fields and values.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>dict[str, <em>Any</em>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="model.Item.from_tag">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_tag</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tag</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#model.Item.from_tag" title="Link to this definition">¶</a></dt>
<dd><p>Extracts the individual field values from the XML tag.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>tag</strong> (<em>Element</em>) – The XML tag for an item.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>New <a class="reference internal" href="#model.Item" title="model.Item"><code class="xref py py-class docutils literal notranslate"><span class="pre">Item</span></code></a> instance.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#model.Item" title="model.Item"><em>Item</em></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="model.Item.model_config">
<span class="sig-name descname"><span class="pre">model_config</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">ClassVar</span><span class="p"><span class="pre">[</span></span><span class="pre">ConfigDict</span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{'frozen':</span> <span class="pre">True}</span></em><a class="headerlink" href="#model.Item.model_config" title="Link to this definition">¶</a></dt>
<dd><p>Configuration for the model, should be a dictionary conforming to [<cite>ConfigDict</cite>][pydantic.config.ConfigDict].</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="model.Item.model_fields">
<span class="sig-name descname"><span class="pre">model_fields</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">ClassVar</span><span class="p"><span class="pre">[</span></span><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">FieldInfo</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{'description':</span> <span class="pre">FieldInfo(annotation=str,</span> <span class="pre">required=True),</span> <span class="pre">'link':</span> <span class="pre">FieldInfo(annotation=Url,</span> <span class="pre">required=True),</span> <span class="pre">'text_pub_date':</span> <span class="pre">FieldInfo(annotation=str,</span> <span class="pre">required=True),</span> <span class="pre">'title':</span> <span class="pre">FieldInfo(annotation=str,</span> <span class="pre">required=True)}</span></em><a class="headerlink" href="#model.Item.model_fields" title="Link to this definition">¶</a></dt>
<dd><p>Metadata about the fields defined on the model,
mapping of field names to [<cite>FieldInfo</cite>][pydantic.fields.FieldInfo].</p>
<p>This replaces <cite>Model.__fields__</cite> from Pydantic V1.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="model.USCourtItem">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">model.</span></span><span class="sig-name descname"><span class="pre">USCourtItem</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">link</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">description</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">text_pub_date</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">docket</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parties</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#model.USCourtItem" title="Link to this definition">¶</a></dt>
<dd><p>Decompose an Item tag content to get Docket and Parties from the Title.</p>
<p>Generally the title has a docket string followed by the parties.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">2</span><span class="p">:</span><span class="mi">23</span><span class="o">-</span><span class="n">cv</span><span class="o">-</span><span class="mi">09491</span><span class="o">-</span><span class="n">PKC</span><span class="o">-</span><span class="n">ST</span> <span class="n">Sookra</span> <span class="n">v</span><span class="o">.</span> <span class="n">Berkeley</span> <span class="n">Carroll</span> <span class="n">School</span> <span class="n">et</span> <span class="n">al</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">2:23-cv-09491-PKC-ST</span></code> is the docket.
The remaining portion name the parties.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>title</strong> (<em>str</em>) – </p></li>
<li><p><strong>link</strong> (<em>Url</em>) – </p></li>
<li><p><strong>description</strong> (<em>str</em>) – </p></li>
<li><p><strong>text_pub_date</strong> (<em>str</em>) – </p></li>
<li><p><strong>docket</strong> (<em>str</em><em> | </em><em>None</em>) – </p></li>
<li><p><strong>parties</strong> (<em>str</em><em> | </em><em>None</em>) – </p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="model.USCourtItem.docket">
<span class="sig-name descname"><span class="pre">docket</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#model.USCourtItem.docket" title="Link to this definition">¶</a></dt>
<dd><p>Docket extracted from the title</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="model.USCourtItem.parties">
<span class="sig-name descname"><span class="pre">parties</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#model.USCourtItem.parties" title="Link to this definition">¶</a></dt>
<dd><p>Parties extracted from the title.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="model.USCourtItem.from_tag">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_tag</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tag</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#model.USCourtItem.from_tag" title="Link to this definition">¶</a></dt>
<dd><p>Extracts the individual field values from the XML tag.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>tag</strong> (<em>Element</em>) – The XML tag for an item.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>New <a class="reference internal" href="#model.USCourtItem" title="model.USCourtItem"><code class="xref py py-class docutils literal notranslate"><span class="pre">USCourtItem</span></code></a> instance.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#model.USCourtItem" title="model.USCourtItem"><em>USCourtItem</em></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="model.USCourtItem.model_config">
<span class="sig-name descname"><span class="pre">model_config</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">ClassVar</span><span class="p"><span class="pre">[</span></span><span class="pre">ConfigDict</span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{'frozen':</span> <span class="pre">True}</span></em><a class="headerlink" href="#model.USCourtItem.model_config" title="Link to this definition">¶</a></dt>
<dd><p>Configuration for the model, should be a dictionary conforming to [<cite>ConfigDict</cite>][pydantic.config.ConfigDict].</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="model.USCourtItem.model_fields">
<span class="sig-name descname"><span class="pre">model_fields</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">ClassVar</span><span class="p"><span class="pre">[</span></span><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">FieldInfo</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{'description':</span> <span class="pre">FieldInfo(annotation=str,</span> <span class="pre">required=True),</span> <span class="pre">'docket':</span> <span class="pre">FieldInfo(annotation=Union[str,</span> <span class="pre">NoneType],</span> <span class="pre">required=True),</span> <span class="pre">'link':</span> <span class="pre">FieldInfo(annotation=Url,</span> <span class="pre">required=True),</span> <span class="pre">'parties':</span> <span class="pre">FieldInfo(annotation=Union[str,</span> <span class="pre">NoneType],</span> <span class="pre">required=True),</span> <span class="pre">'text_pub_date':</span> <span class="pre">FieldInfo(annotation=str,</span> <span class="pre">required=True),</span> <span class="pre">'title':</span> <span class="pre">FieldInfo(annotation=str,</span> <span class="pre">required=True)}</span></em><a class="headerlink" href="#model.USCourtItem.model_fields" title="Link to this definition">¶</a></dt>
<dd><p>Metadata about the fields defined on the model,
mapping of field names to [<cite>FieldInfo</cite>][pydantic.fields.FieldInfo].</p>
<p>This replaces <cite>Model.__fields__</cite> from Pydantic V1.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="model.USCourtItemDetail">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">model.</span></span><span class="sig-name descname"><span class="pre">USCourtItemDetail</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">item</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">channel</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#model.USCourtItemDetail" title="Link to this definition">¶</a></dt>
<dd><p>An item and the channel for this item.
The two are bound together to make sure the overall court information is kept with each item.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>item</strong> (<a class="reference internal" href="#model.USCourtItem" title="model.USCourtItem"><em>USCourtItem</em></a>) – </p></li>
<li><p><strong>channel</strong> (<a class="reference internal" href="#model.Channel" title="model.Channel"><em>Channel</em></a>) – </p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="model.USCourtItemDetail.item">
<span class="sig-name descname"><span class="pre">item</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#model.USCourtItem" title="model.USCourtItem"><span class="pre">USCourtItem</span></a></em><a class="headerlink" href="#model.USCourtItemDetail.item" title="Link to this definition">¶</a></dt>
<dd><p>The item from the RSS feed.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="model.USCourtItemDetail.channel">
<span class="sig-name descname"><span class="pre">channel</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#model.Channel" title="model.Channel"><span class="pre">Channel</span></a></em><a class="headerlink" href="#model.USCourtItemDetail.channel" title="Link to this definition">¶</a></dt>
<dd><p>The channel to which the item belongs.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="model.USCourtItemDetail.model_config">
<span class="sig-name descname"><span class="pre">model_config</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">ClassVar</span><span class="p"><span class="pre">[</span></span><span class="pre">ConfigDict</span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{'frozen':</span> <span class="pre">True}</span></em><a class="headerlink" href="#model.USCourtItemDetail.model_config" title="Link to this definition">¶</a></dt>
<dd><p>Configuration for the model, should be a dictionary conforming to [<cite>ConfigDict</cite>][pydantic.config.ConfigDict].</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="model.USCourtItemDetail.model_fields">
<span class="sig-name descname"><span class="pre">model_fields</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">ClassVar</span><span class="p"><span class="pre">[</span></span><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">FieldInfo</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{'channel':</span> <span class="pre">FieldInfo(annotation=Channel,</span> <span class="pre">required=True),</span> <span class="pre">'item':</span> <span class="pre">FieldInfo(annotation=USCourtItem,</span> <span class="pre">required=True)}</span></em><a class="headerlink" href="#model.USCourtItemDetail.model_fields" title="Link to this definition">¶</a></dt>
<dd><p>Metadata about the fields defined on the model,
mapping of field names to [<cite>FieldInfo</cite>][pydantic.fields.FieldInfo].</p>
<p>This replaces <cite>Model.__fields__</cite> from Pydantic V1.</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-storage">
<span id="storage"></span><h3>Storage<a class="headerlink" href="#module-storage" title="Link to this heading">¶</a></h3>
<p>Storage for the Feeder Reader.</p>
<p>The idea is to provide a common abstract class with two concrete implementations:</p>
<blockquote>
<div><ul class="simple">
<li><p>Local File system</p></li>
<li><p>AWS S3</p></li>
</ul>
<figure class="align-default">
<img alt="https://www.plantuml.com/plantuml/svg/TLB1QiCm3BtxAtHSnz9BRsMKhXk5Gc47CtOOOxYEsDpQKR4LLjZwxqljr4bMgekntjFJaz0yiF9SEok49hUd2Yk6mEJL9yAFW2RK9h1Nca5R5GB80NWAF9Z0uMQl-6i4KrWGsOmvjSE4vDItDumVsq1L1Ew0DblKt14yghAFnxwZQSlxfyDuu2iwjh5L6f-DhPl_s-dpthLocH1pHn6VDEcQjB9BOx4TEKBdyUz_Y-AIqQkMawjb7NJihzrHYRRTQz9uaOzKUrunkYTaPMmii5INyF0g1rGvMTHwXpn8FQUD9GSj0MwZWnPgzB8RA8fPfoFELp0Upv8r8UPObSsj_04=" src="https://www.plantuml.com/plantuml/svg/TLB1QiCm3BtxAtHSnz9BRsMKhXk5Gc47CtOOOxYEsDpQKR4LLjZwxqljr4bMgekntjFJaz0yiF9SEok49hUd2Yk6mEJL9yAFW2RK9h1Nca5R5GB80NWAF9Z0uMQl-6i4KrWGsOmvjSE4vDItDumVsq1L1Ew0DblKt14yghAFnxwZQSlxfyDuu2iwjh5L6f-DhPl_s-dpthLocH1pHn6VDEcQjB9BOx4TEKBdyUz_Y-AIqQkMawjb7NJihzrHYRRTQz9uaOzKUrunkYTaPMmii5INyF0g1rGvMTHwXpn8FQUD9GSj0MwZWnPgzB8RA8fPfoFELp0Upv8r8UPObSsj_04=" />
</figure>
</div></blockquote>
<dl class="py class">
<dt class="sig sig-object py" id="storage.Storage">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">storage.</span></span><span class="sig-name descname"><span class="pre">Storage</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">base</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#storage.Storage" title="Link to this definition">¶</a></dt>
<dd><p>Abstract class with operations to persist data.</p>
<p>Note that a path is represented as a <code class="docutils literal notranslate"><span class="pre">tuple[str,</span> <span class="pre">...]</span></code>, not as a “/”-delimited string.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>base</strong> (<em>Path</em>) – </p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="storage.Storage.textify">
<span class="sig-name descname"><span class="pre">textify</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">content</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#storage.Storage.textify" title="Link to this definition">¶</a></dt>
<dd><p>Transforms a <code class="docutils literal notranslate"><span class="pre">Writeable</span></code> into JSON-formatted representation.</p>
<ul class="simple">
<li><p>str objects are left intact, no changes. Presumably, these were already in JSON format.</p></li>
<li><p>Any <code class="xref py py-class docutils literal notranslate"><span class="pre">pydanticBaseModel</span></code> instance is serialized using it’s <code class="xref py py-meth docutils literal notranslate"><span class="pre">model_dump_json()</span></code> method.</p></li>
<li><p>Any other class is provided to the <code class="xref py py-class docutils literal notranslate"><span class="pre">pydantic.to_json</span></code> function.</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>content</strong> (<em>str</em><em> | </em><em>BaseModel</em><em> | </em><em>Iterable</em><em>[</em><em>BaseModel</em><em>]</em>) – Something to persist</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>String, ready to write.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="storage.Storage.exists">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">exists</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">local_path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#storage.Storage.exists" title="Link to this definition">¶</a></dt>
<dd><p>Does the path exist?</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>local_path</strong> (<em>str</em><em> | </em><em>tuple</em><em>[</em><em>str</em><em>, </em><em>...</em><em>]</em>) – nodes along the path.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="storage.Storage.make">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">make</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">local_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exist_ok</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#storage.Storage.make" title="Link to this definition">¶</a></dt>
<dd><p>Make a new directory.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>local_path</strong> (<em>str</em><em> | </em><em>tuple</em><em>[</em><em>str</em><em>, </em><em>...</em><em>]</em>) – nodes along the path.</p></li>
<li><p><strong>exist_ok</strong> (<em>bool</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="storage.Storage.write_json">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">write_json</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">local_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">content</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#storage.Storage.write_json" title="Link to this definition">¶</a></dt>
<dd><p>Serialize an object or list of objects in JSON. Most collections should be lists.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>local_path</strong> (<em>str</em><em> | </em><em>tuple</em><em>[</em><em>str</em><em>, </em><em>...</em><em>]</em>) – nodes along the path.</p></li>
<li><p><strong>content</strong> (<em>str</em><em> | </em><em>BaseModel</em><em> | </em><em>Iterable</em><em>[</em><em>BaseModel</em><em>]</em>) – An object to be converted to JSON and persisted. Usually a list.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="storage.Storage.read_json">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">read_json</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">local_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#storage.Storage.read_json" title="Link to this definition">¶</a></dt>
<dd><p>Deserialize a list of objects from JSON to Python. Most collections are lists.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>local_path</strong> (<em>str</em><em> | </em><em>tuple</em><em>[</em><em>str</em><em>, </em><em>...</em><em>]</em>) – nodes along the path.</p></li>
<li><p><strong>target</strong> (<em>type</em><em>[</em><em>BaseModel</em><em>]</em>) – Sublass of <code class="xref py py-class docutils literal notranslate"><span class="pre">pydantic.BaseModel</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>list[<em>BaseModel</em>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="storage.Storage.write_text">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">write_text</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">local_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">content</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#storage.Storage.write_text" title="Link to this definition">¶</a></dt>
<dd><p>Write text. Often HTML. Possible Markdown or CSV.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>local_path</strong> (<em>str</em><em> | </em><em>tuple</em><em>[</em><em>str</em><em>, </em><em>...</em><em>]</em>) – nodes along the path.</p></li>
<li><p><strong>content</strong> (<em>str</em>) – An string to write.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="storage.Storage.open_nljson">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">open_nljson</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">local_path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#storage.Storage.open_nljson" title="Link to this definition">¶</a></dt>
<dd><p>Open a path to append objects in Newline Delimited JSON format.
The path must exist. Use <a class="reference internal" href="#storage.Storage.exists" title="storage.Storage.exists"><code class="xref py py-meth docutils literal notranslate"><span class="pre">exists()</span></code></a> and <a class="reference internal" href="#storage.Storage.make" title="storage.Storage.make"><code class="xref py py-meth docutils literal notranslate"><span class="pre">make()</span></code></a> as needed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>local_path</strong> (<em>str</em><em> | </em><em>tuple</em><em>[</em><em>str</em><em>, </em><em>...</em><em>]</em>) – nodes along the path.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="storage.Storage.write_nljson">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">write_nljson</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">content</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#storage.Storage.write_nljson" title="Link to this definition">¶</a></dt>
<dd><p>Append on object in Newline Delimited JSON format to the currenly open NLJSON.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>content</strong> (<em>str</em><em> | </em><em>BaseModel</em><em> | </em><em>Iterable</em><em>[</em><em>BaseModel</em><em>]</em>) – An object to be converted to JSON and persisted.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="storage.Storage.close_nljson">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">close_nljson</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#storage.Storage.close_nljson" title="Link to this definition">¶</a></dt>
<dd><p>Close path after appending objects in Newline Delimited JSON format.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="storage.Storage.listdir">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">listdir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">local_path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#storage.Storage.listdir" title="Link to this definition">¶</a></dt>
<dd><p>List the contents of a path.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>local_path</strong> (<em>str</em><em> | </em><em>tuple</em><em>[</em><em>str</em><em>, </em><em>...</em><em>]</em>) – nodes along the path.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><em>Iterator</em>[tuple[str, …]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="storage.Storage.rmdir">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">rmdir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">local_path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#storage.Storage.rmdir" title="Link to this definition">¶</a></dt>
<dd><p>Remove all objects with a given path.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>local_path</strong> (<em>str</em><em> | </em><em>tuple</em><em>[</em><em>str</em><em>, </em><em>...</em><em>]</em>) – nodes along the path.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="storage.Storage.validate">
<span class="sig-name descname"><span class="pre">validate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">document</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cls</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#storage.Storage.validate" title="Link to this definition">¶</a></dt>
<dd><p>Uses <code class="docutils literal notranslate"><span class="pre">pydantic</span></code> model validation to validate JSON to create an object.
Since most collections have lists, this builds a list of instances,
even when given a dictionary built from a JSON source.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>document</strong> (<em>dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em>) – a dictionary recovered from parsing JSON text.</p></li>
<li><p><strong>cls</strong> (<em>type</em><em>[</em><em>BaseModel</em><em>]</em>) – A subclass of <code class="xref py py-class docutils literal notranslate"><span class="pre">pydantic.BaseModel</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>an instance of the given class</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p>Validation errors of the document cannot be validated.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>list[<em>BaseModel</em>]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="storage.LocalFileStorage">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">storage.</span></span><span class="sig-name descname"><span class="pre">LocalFileStorage</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">base</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#storage.LocalFileStorage" title="Link to this definition">¶</a></dt>
<dd><p>Concrete class with operations to persist data in the local filesystem.</p>
<p>Note that a path is represented as a <code class="docutils literal notranslate"><span class="pre">tuple[str,</span> <span class="pre">...]</span></code>, not as a “/”-delimited string.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>base</strong> (<em>Path</em>) – </p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="storage.LocalFileStorage.pathify">
<span class="sig-name descname"><span class="pre">pathify</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">local_path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#storage.LocalFileStorage.pathify" title="Link to this definition">¶</a></dt>
<dd><p>Builds a local <code class="xref py py-class docutils literal notranslate"><span class="pre">Path</span></code> from a tuple of strings.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>local_path</strong> (<em>str</em><em> | </em><em>tuple</em><em>[</em><em>str</em><em>, </em><em>...</em><em>]</em>) – nodes along the path.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Path</span></code> instance.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><em>Path</em></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="storage.LocalFileStorage.exists">
<span class="sig-name descname"><span class="pre">exists</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">local_path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#storage.LocalFileStorage.exists" title="Link to this definition">¶</a></dt>
<dd><p>Does the path exist?</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>local_path</strong> (<em>str</em><em> | </em><em>tuple</em><em>[</em><em>str</em><em>, </em><em>...</em><em>]</em>) – nodes along the path.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="storage.LocalFileStorage.make">
<span class="sig-name descname"><span class="pre">make</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">local_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exist_ok</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#storage.LocalFileStorage.make" title="Link to this definition">¶</a></dt>
<dd><p>Make a new directory.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>local_path</strong> (<em>str</em><em> | </em><em>tuple</em><em>[</em><em>str</em><em>, </em><em>...</em><em>]</em>) – nodes along the path.</p></li>
<li><p><strong>exist_ok</strong> (<em>bool</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="storage.LocalFileStorage.write_json">
<span class="sig-name descname"><span class="pre">write_json</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">local_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">content</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#storage.LocalFileStorage.write_json" title="Link to this definition">¶</a></dt>
<dd><p>Serialize an object or list of objects in JSON. Most collections should be lists.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>local_path</strong> (<em>str</em><em> | </em><em>tuple</em><em>[</em><em>str</em><em>, </em><em>...</em><em>]</em>) – nodes along the path.</p></li>
<li><p><strong>content</strong> (<em>str</em><em> | </em><em>BaseModel</em><em> | </em><em>Iterable</em><em>[</em><em>BaseModel</em><em>]</em>) – An object to be converted to JSON and persisted. Usually a list.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="storage.LocalFileStorage.read_json">
<span class="sig-name descname"><span class="pre">read_json</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">local_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cls</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#storage.LocalFileStorage.read_json" title="Link to this definition">¶</a></dt>
<dd><p>Deserialize a list of objects from JSON to Python. Most collections are lists.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>local_path</strong> (<em>str</em><em> | </em><em>tuple</em><em>[</em><em>str</em><em>, </em><em>...</em><em>]</em>) – nodes along the path.</p></li>
<li><p><strong>target</strong> – Sublass of <code class="xref py py-class docutils literal notranslate"><span class="pre">pydantic.BaseModel</span></code>.</p></li>
<li><p><strong>cls</strong> (<em>type</em><em>[</em><em>BaseModel</em><em>]</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>list[<em>BaseModel</em>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="storage.LocalFileStorage.write_text">
<span class="sig-name descname"><span class="pre">write_text</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">local_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">content</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#storage.LocalFileStorage.write_text" title="Link to this definition">¶</a></dt>
<dd><p>Write text. Often HTML. Possible Markdown or CSV.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>local_path</strong> (<em>str</em><em> | </em><em>tuple</em><em>[</em><em>str</em><em>, </em><em>...</em><em>]</em>) – nodes along the path.</p></li>
<li><p><strong>content</strong> (<em>str</em>) – An string to write.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="storage.LocalFileStorage.open_nljson">
<span class="sig-name descname"><span class="pre">open_nljson</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">local_path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#storage.LocalFileStorage.open_nljson" title="Link to this definition">¶</a></dt>
<dd><p>Open a path to append objects in Newline Delimited JSON format.
The path must exist. Use <a class="reference internal" href="#storage.LocalFileStorage.exists" title="storage.LocalFileStorage.exists"><code class="xref py py-meth docutils literal notranslate"><span class="pre">exists()</span></code></a> and <a class="reference internal" href="#storage.LocalFileStorage.make" title="storage.LocalFileStorage.make"><code class="xref py py-meth docutils literal notranslate"><span class="pre">make()</span></code></a> as needed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>local_path</strong> (<em>str</em><em> | </em><em>tuple</em><em>[</em><em>str</em><em>, </em><em>...</em><em>]</em>) – nodes along the path.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="storage.LocalFileStorage.write_nljson">
<span class="sig-name descname"><span class="pre">write_nljson</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">content</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#storage.LocalFileStorage.write_nljson" title="Link to this definition">¶</a></dt>
<dd><p>Append on object in Newline Delimited JSON format to the currenly open NLJSON.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>content</strong> (<em>str</em><em> | </em><em>BaseModel</em><em> | </em><em>Iterable</em><em>[</em><em>BaseModel</em><em>]</em>) – An object to be converted to JSON and persisted.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="storage.LocalFileStorage.close_nljson">
<span class="sig-name descname"><span class="pre">close_nljson</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#storage.LocalFileStorage.close_nljson" title="Link to this definition">¶</a></dt>
<dd><p>Close path after appending objects in Newline Delimited JSON format.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="storage.LocalFileStorage.listdir">
<span class="sig-name descname"><span class="pre">listdir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">local_path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#storage.LocalFileStorage.listdir" title="Link to this definition">¶</a></dt>
<dd><p>List the contents of a path.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>local_path</strong> (<em>str</em><em> | </em><em>tuple</em><em>[</em><em>str</em><em>, </em><em>...</em><em>]</em>) – nodes along the path.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><em>Iterator</em>[tuple[str, …]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="storage.LocalFileStorage.rmdir">
<span class="sig-name descname"><span class="pre">rmdir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">local_path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#storage.LocalFileStorage.rmdir" title="Link to this definition">¶</a></dt>
<dd><p>Remove all objects with a given path.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>local_path</strong> (<em>str</em><em> | </em><em>tuple</em><em>[</em><em>str</em><em>, </em><em>...</em><em>]</em>) – nodes along the path.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="storage.S3Storage">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">storage.</span></span><span class="sig-name descname"><span class="pre">S3Storage</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">base</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#storage.S3Storage" title="Link to this definition">¶</a></dt>
<dd><p>Concrete class with operations to persist data in an S3 bucket.</p>
<p>Note that a path is represented as a <code class="docutils literal notranslate"><span class="pre">tuple[str,</span> <span class="pre">...]</span></code>, not as a “/”-delimited string.</p>
<p>Within an S3 bucket, there aren’t proper directories;
the “path” IS merely a long key to identify an object in the bucket.
This means that the <a class="reference internal" href="#storage.S3Storage.make" title="storage.S3Storage.make"><code class="xref py py-meth docutils literal notranslate"><span class="pre">make()</span></code></a> method doesn’t really need to do anything.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>base</strong> (<em>Path</em>) – </p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="storage.S3Storage.pathify">
<span class="sig-name descname"><span class="pre">pathify</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">local_path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#storage.S3Storage.pathify" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>local_path</strong> (<em>str</em><em> | </em><em>tuple</em><em>[</em><em>str</em><em>, </em><em>...</em><em>]</em>) – </p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="storage.S3Storage.exists">
<span class="sig-name descname"><span class="pre">exists</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">local_path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#storage.S3Storage.exists" title="Link to this definition">¶</a></dt>
<dd><p>Does the path exist?</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>local_path</strong> (<em>str</em><em> | </em><em>tuple</em><em>[</em><em>str</em><em>, </em><em>...</em><em>]</em>) – nodes along the path.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="storage.S3Storage.make">
<span class="sig-name descname"><span class="pre">make</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">local_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exist_ok</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#storage.S3Storage.make" title="Link to this definition">¶</a></dt>
<dd><p>Make a new directory.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>local_path</strong> (<em>str</em><em> | </em><em>tuple</em><em>[</em><em>str</em><em>, </em><em>...</em><em>]</em>) – nodes along the path.</p></li>
<li><p><strong>exist_ok</strong> (<em>bool</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="storage.S3Storage.write_json">
<span class="sig-name descname"><span class="pre">write_json</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">local_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">content</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#storage.S3Storage.write_json" title="Link to this definition">¶</a></dt>
<dd><p>Serialize an object or list of objects in JSON. Most collections should be lists.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>local_path</strong> (<em>str</em><em> | </em><em>tuple</em><em>[</em><em>str</em><em>, </em><em>...</em><em>]</em>) – nodes along the path.</p></li>
<li><p><strong>content</strong> (<em>str</em><em> | </em><em>BaseModel</em><em> | </em><em>Iterable</em><em>[</em><em>BaseModel</em><em>]</em>) – An object to be converted to JSON and persisted. Usually a list.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="storage.S3Storage.read_json">
<span class="sig-name descname"><span class="pre">read_json</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">local_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cls</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#storage.S3Storage.read_json" title="Link to this definition">¶</a></dt>
<dd><p>Deserialize a list of objects from JSON to Python. Most collections are lists.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>local_path</strong> (<em>str</em><em> | </em><em>tuple</em><em>[</em><em>str</em><em>, </em><em>...</em><em>]</em>) – nodes along the path.</p></li>
<li><p><strong>target</strong> – Sublass of <code class="xref py py-class docutils literal notranslate"><span class="pre">pydantic.BaseModel</span></code>.</p></li>
<li><p><strong>cls</strong> (<em>type</em><em>[</em><em>BaseModel</em><em>]</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>list[<em>BaseModel</em>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="storage.S3Storage.write_text">
<span class="sig-name descname"><span class="pre">write_text</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">local_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">content</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#storage.S3Storage.write_text" title="Link to this definition">¶</a></dt>
<dd><p>Write text. Often HTML. Possible Markdown or CSV.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>local_path</strong> (<em>str</em><em> | </em><em>tuple</em><em>[</em><em>str</em><em>, </em><em>...</em><em>]</em>) – nodes along the path.</p></li>
<li><p><strong>content</strong> (<em>str</em>) – An string to write.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="storage.S3Storage.open_nljson">
<span class="sig-name descname"><span class="pre">open_nljson</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">local_path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#storage.S3Storage.open_nljson" title="Link to this definition">¶</a></dt>
<dd><p>Open a path to append objects in Newline Delimited JSON format.
The path must exist. Use <a class="reference internal" href="#storage.S3Storage.exists" title="storage.S3Storage.exists"><code class="xref py py-meth docutils literal notranslate"><span class="pre">exists()</span></code></a> and <a class="reference internal" href="#storage.S3Storage.make" title="storage.S3Storage.make"><code class="xref py py-meth docutils literal notranslate"><span class="pre">make()</span></code></a> as needed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>local_path</strong> (<em>str</em><em> | </em><em>tuple</em><em>[</em><em>str</em><em>, </em><em>...</em><em>]</em>) – nodes along the path.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="storage.S3Storage.write_nljson">
<span class="sig-name descname"><span class="pre">write_nljson</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">content</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#storage.S3Storage.write_nljson" title="Link to this definition">¶</a></dt>
<dd><p>Append on object in Newline Delimited JSON format to the currenly open NLJSON.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>content</strong> (<em>str</em><em> | </em><em>BaseModel</em><em> | </em><em>Iterable</em><em>[</em><em>BaseModel</em><em>]</em>) – An object to be converted to JSON and persisted.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="storage.S3Storage.close_nljson">
<span class="sig-name descname"><span class="pre">close_nljson</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#storage.S3Storage.close_nljson" title="Link to this definition">¶</a></dt>
<dd><p>Close path after appending objects in Newline Delimited JSON format.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="storage.S3Storage.listdir">
<span class="sig-name descname"><span class="pre">listdir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">local_path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#storage.S3Storage.listdir" title="Link to this definition">¶</a></dt>
<dd><p>List the contents of a path.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>local_path</strong> (<em>str</em><em> | </em><em>tuple</em><em>[</em><em>str</em><em>, </em><em>...</em><em>]</em>) – nodes along the path.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><em>Iterator</em>[tuple[str, …]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="storage.S3Storage.rmdir">
<span class="sig-name descname"><span class="pre">rmdir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">local_path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#storage.S3Storage.rmdir" title="Link to this definition">¶</a></dt>
<dd><p>Remove all objects with a given path.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>local_path</strong> (<em>str</em><em> | </em><em>tuple</em><em>[</em><em>str</em><em>, </em><em>...</em><em>]</em>) – nodes along the path.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-notification">
<span id="notification"></span><h3>Notification<a class="headerlink" href="#module-notification" title="Link to this heading">¶</a></h3>
<p>Notification for the Feeder Reader.</p>
<p>The idea is to provide a common abstract class with several concrete implementations:</p>
<blockquote>
<div><ul class="simple">
<li><p>Stored log files.</p></li>
<li><p>AWS SNS.</p></li>
<li><p>Local SMTP.</p></li>
<li><p>AWS SES – better than local SMTP.</p></li>
</ul>
</div></blockquote>
<p>The notifiers use Jinja to format documents.
This module has the document templates.</p>
<blockquote>
<div><figure class="align-default">
<img alt="https://www.plantuml.com/plantuml/svg/dLDTIyCm57tFhyZZXdO_GCQOw0Q25g4J7qGaIxCk8nyZkHLaxh-RD4tNj4yp3sroxpadzojB2yH0BGL2LCkZLam1LXhuZbC2N2jyGjWjihLW20LC1R4MvsE4Nv9PIofcxx3W5ZxUYWTT6tW29XyP42u-E-HDkEHdCi9CEqo6c-0cVSif1dB6EwwutRVUCsf-8RfdNRa0MHjODaJwRvB0_3VB8gclKxniNgyNYgn4AI_-8HH8YSwgM4bNf2k5MXOwzxiiTScYK50VzI8bM0b7mRS9nISxG84sRWPILB2bGBUJtVG4NCNWYsgrunMUp_5aVOkreNjUJl6wLhH9QB58LGvS7KWYibBVt6WbdRTdtJ1v50H234BN9Rv_BoAF6ogOBrDop0iFJXx3RBQuAEL3JrDH57ljBLwZwrbZS7V4yMpERMMwKMkClgWZzKjn45eoLRf7-mS=" src="https://www.plantuml.com/plantuml/svg/dLDTIyCm57tFhyZZXdO_GCQOw0Q25g4J7qGaIxCk8nyZkHLaxh-RD4tNj4yp3sroxpadzojB2yH0BGL2LCkZLam1LXhuZbC2N2jyGjWjihLW20LC1R4MvsE4Nv9PIofcxx3W5ZxUYWTT6tW29XyP42u-E-HDkEHdCi9CEqo6c-0cVSif1dB6EwwutRVUCsf-8RfdNRa0MHjODaJwRvB0_3VB8gclKxniNgyNYgn4AI_-8HH8YSwgM4bNf2k5MXOwzxiiTScYK50VzI8bM0b7mRS9nISxG84sRWPILB2bGBUJtVG4NCNWYsgrunMUp_5aVOkreNjUJl6wLhH9QB58LGvS7KWYibBVt6WbdRTdtJ1v50H234BN9Rv_BoAF6ogOBrDop0iFJXx3RBQuAEL3JrDH57ljBLwZwrbZS7V4yMpERMMwKMkClgWZzKjn45eoLRf7-mS=" />
</figure>
<p>A notifier is a context manager.
The idea is that it is going to accumulate details
and send them at exit time.
If there are no details, it does nothing.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">note_class</span> <span class="o">=</span> <span class="n">common</span><span class="o">.</span><span class="n">get_class</span><span class="p">(</span><span class="n">Notification</span><span class="p">)</span>
<span class="k">with</span> <span class="n">note_class</span><span class="p">(</span><span class="n">storage</span><span class="p">,</span> <span class="n">nfr_config</span><span class="p">)</span> <span class="k">as</span> <span class="n">notifier</span><span class="p">:</span>
    <span class="c1"># process items</span>
    <span class="n">notifier</span><span class="o">.</span><span class="n">notify</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p>At the end of the <code class="docutils literal notranslate"><span class="pre">with</span></code> statement, the context manager will
make sure all items are handled.</p>
<dl class="py class">
<dt class="sig sig-object py" id="notification.Notification">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">notification.</span></span><span class="sig-name descname"><span class="pre">Notification</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">storage</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#notification.Notification" title="Link to this definition">¶</a></dt>
<dd><p>Abstract class with operations to notify of changes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>storage</strong> (<a class="reference internal" href="#storage.Storage" title="storage.Storage"><em>Storage</em></a><em> | </em><em>None</em>) – </p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="notification.Notification.start">
<span class="sig-name descname"><span class="pre">start</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#notification.Notification.start" title="Link to this definition">¶</a></dt>
<dd><p>Start accumulating  notifications.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="notification.Notification.notify">
<span class="sig-name descname"><span class="pre">notify</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#notification.Notification.notify" title="Link to this definition">¶</a></dt>
<dd><p>Accumulate an item for notification.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>message</strong> (<a class="reference internal" href="#model.USCourtItem" title="model.USCourtItem"><em>USCourtItem</em></a>) – An item to include in the notification.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="notification.Notification.finish">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">finish</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#notification.Notification.finish" title="Link to this definition">¶</a></dt>
<dd><p>End accumulating  notifications; finalize and send.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="notification.LogNote">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">notification.</span></span><span class="sig-name descname"><span class="pre">LogNote</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">storage</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#notification.LogNote" title="Link to this definition">¶</a></dt>
<dd><p>Accumulates an HTML file with notifications.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">storage</span></code> parameter is required.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>storage</strong> (<a class="reference internal" href="#storage.Storage" title="storage.Storage"><em>Storage</em></a>) – </p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="notification.LogNote.finish">
<span class="sig-name descname"><span class="pre">finish</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#notification.LogNote.finish" title="Link to this definition">¶</a></dt>
<dd><p>End accumulating  notifications; finalize and send.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="notification.SMTPNote">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">notification.</span></span><span class="sig-name descname"><span class="pre">SMTPNote</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">storage</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#notification.SMTPNote" title="Link to this definition">¶</a></dt>
<dd><p>Sends an email message using Python smtplib.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">storage</span></code> parameter must be <code class="docutils literal notranslate"><span class="pre">None</span></code>, which is the default.</p>
<p>The configuration file must provide the parameters for
accessing the SMTP server. See <a class="reference internal" href="#common.get_config" title="common.get_config"><code class="xref py py-func docutils literal notranslate"><span class="pre">common.get_config()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>storage</strong> (<a class="reference internal" href="#storage.Storage" title="storage.Storage"><em>Storage</em></a><em> | </em><em>None</em>) – </p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="notification.SMTPNote.finish">
<span class="sig-name descname"><span class="pre">finish</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#notification.SMTPNote.finish" title="Link to this definition">¶</a></dt>
<dd><p>End accumulating  notifications; finalize and send.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="notification.SNSNote">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">notification.</span></span><span class="sig-name descname"><span class="pre">SNSNote</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">storage</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#notification.SNSNote" title="Link to this definition">¶</a></dt>
<dd><p>Sends a message using AWS SNS; presumably with an email subscription configured.</p>
<p>The topic’s ARN is provided as an environment variable <span class="target" id="index-0"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">FDRDR_SNS_TOPIC</span></code>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">storage</span></code> parameter must be <code class="docutils literal notranslate"><span class="pre">None</span></code>, which is the default.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>storage</strong> (<a class="reference internal" href="#storage.Storage" title="storage.Storage"><em>Storage</em></a><em> | </em><em>None</em>) – </p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="notification.SNSNote.finish">
<span class="sig-name descname"><span class="pre">finish</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#notification.SNSNote.finish" title="Link to this definition">¶</a></dt>
<dd><p>End accumulating  notifications; finalize and send.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="notification.SESEmail">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">notification.</span></span><span class="sig-name descname"><span class="pre">SESEmail</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">storage</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#notification.SESEmail" title="Link to this definition">¶</a></dt>
<dd><p>Sends an email message using AWS SES.</p>
<p>The sending email address must have been verified with AWS.</p>
<p><a class="reference external" href="https://docs.aws.amazon.com/ses/latest/dg/creating-identities.html">https://docs.aws.amazon.com/ses/latest/dg/creating-identities.html</a></p>
<p>The Identity ARN is provided as an environment variable <span class="target" id="index-1"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">FDRDR_IDENTITY_ARN</span></code>.
The configuration file must provide the parameters for
accessing the SES Email. See <a class="reference internal" href="#common.get_config" title="common.get_config"><code class="xref py py-func docutils literal notranslate"><span class="pre">common.get_config()</span></code></a>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">storage</span></code> parameter must be <code class="docutils literal notranslate"><span class="pre">None</span></code>, which is the default.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>storage</strong> (<a class="reference internal" href="#storage.Storage" title="storage.Storage"><em>Storage</em></a><em> | </em><em>None</em>) – </p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="notification.SESEmail.finish">
<span class="sig-name descname"><span class="pre">finish</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#notification.SESEmail.finish" title="Link to this definition">¶</a></dt>
<dd><p>End accumulating  notifications; finalize and send.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
</section>
<section id="applications">
<h2>Applications<a class="headerlink" href="#applications" title="Link to this heading">¶</a></h2>
<p>There are three top-level applications.</p>
<p>The <a class="reference internal" href="#reader">Reader</a> application parses the RSS feed and saves history.
This application includes a Cleaner function to erase old objects from history.</p>
<p>The <a class="reference internal" href="#filter">Filter</a> application examines the history for any of the interesting dockets.
These are used for notification.</p>
<p>The <a class="reference internal" href="#writer">Writer</a> application converts the history into HTML pages.
When an S3 bucket is used, these can be read with a browser.</p>
<section id="module-reader">
<span id="reader"></span><h3>Reader<a class="headerlink" href="#module-reader" title="Link to this heading">¶</a></h3>
<p>Reader application of the Feeder Reader.</p>
<figure class="align-default">
<img alt="https://www.plantuml.com/plantuml/svg/ZPDDImCn48Rl-HN3NggbI_4gfGYLWg0N5y5RYTbf6yX7IR984V-xizkidRMrcbEIUUQTDxEpTp79a1fhX38oHbWZrYkTCC1i1bVB2VYWjhg-XcNZLDBUmNoUKILtgGduDnXGrlyID2ZTPL0eRtVUeKiGamzoW_0XWDP1eJhSYKyXSj6odBCttKAnzW5GgYqyLrKNAJYQtoIoezUdHrxI-XhDeE1BjV1DI0y9xJqcgStv6BjTRALpQ4HtbGymBaieRYQsE4bYPvWHTL8GfgFEEGT7qu7w-RnsvTmUf3pg73swCzGxxS_Ssh6bRNvBK6lRFiQ2nJmN9s2lqPmXk7L6YNx0JhwXyYus5edfaPyw-OqjIwuIHriopyctQP2kXlUWEx0FZd_Nz8wshlEOPvQfyecXdQN9vIEpmRGYWRNUN1hquGGVSmO5sRKW1GIqkxG7Y_ODGnJY3brDl_ON" src="https://www.plantuml.com/plantuml/svg/ZPDDImCn48Rl-HN3NggbI_4gfGYLWg0N5y5RYTbf6yX7IR984V-xizkidRMrcbEIUUQTDxEpTp79a1fhX38oHbWZrYkTCC1i1bVB2VYWjhg-XcNZLDBUmNoUKILtgGduDnXGrlyID2ZTPL0eRtVUeKiGamzoW_0XWDP1eJhSYKyXSj6odBCttKAnzW5GgYqyLrKNAJYQtoIoezUdHrxI-XhDeE1BjV1DI0y9xJqcgStv6BjTRALpQ4HtbGymBaieRYQsE4bYPvWHTL8GfgFEEGT7qu7w-RnsvTmUf3pg73swCzGxxS_Ssh6bRNvBK6lRFiQ2nJmN9s2lqPmXk7L6YNx0JhwXyYus5edfaPyw-OqjIwuIHriopyctQP2kXlUWEx0FZd_Nz8wshlEOPvQfyecXdQN9vIEpmRGYWRNUN1hquGGVSmO5sRKW1GIqkxG7Y_ODGnJY3brDl_ON" />
</figure>
<p>The <a class="reference internal" href="#module-reader" title="reader"><code class="xref py py-func docutils literal notranslate"><span class="pre">reader()</span></code></a> uses <a class="reference internal" href="#module-common" title="common"><code class="xref py py-mod docutils literal notranslate"><span class="pre">common</span></code></a> to get parameters with the list of RSS feeds.
For each feed, it gets the current RSS document, and parses this to extract
the <code class="xref py py-class docutils literal notranslate"><span class="pre">USCourtItemDetail</span></code> details.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Feeds have only the previous 24 hours of content.</p>
<p>This should be run at least once each day, twice to be sure nothing is missed.</p>
</div>
<div class="admonition-todo admonition" id="id1">
<p class="admonition-title">Todo</p>
<p>This needs to be more cautious about reading from storage.</p>
<p>We can’t reread stored history for every individual item.</p>
</div>
<dl class="py function">
<dt class="sig sig-object py" id="reader.feed_iter">
<span class="sig-prename descclassname"><span class="pre">reader.</span></span><span class="sig-name descname"><span class="pre">feed_iter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">document</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#reader.feed_iter" title="Link to this definition">¶</a></dt>
<dd><p>Iterates through the <code class="docutils literal notranslate"><span class="pre">&lt;channel&gt;&lt;item&gt;...&lt;/item&gt;&lt;/channel&gt;</span></code> structure of the <code class="docutils literal notranslate"><span class="pre">&lt;rss&gt;</span></code> tag describing a feed.</p>
<p>This emits a sequence of <a class="reference internal" href="#model.Channel" title="model.Channel"><code class="xref py py-class docutils literal notranslate"><span class="pre">model.Channel</span></code></a> and <a class="reference internal" href="#model.USCourtItem" title="model.USCourtItem"><code class="xref py py-class docutils literal notranslate"><span class="pre">model.USCourtItem</span></code></a> objects from the XML.
No effort is made to combine the <code class="xref py py-class docutils literal notranslate"><span class="pre">Channel</span></code> and <code class="xref py py-class docutils literal notranslate"><span class="pre">USCourtItem</span></code> items;
the data is emitted as a denormalized sequence.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>document</strong> (<em>Element</em>) – the XML source.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>an iterable of <code class="xref py py-class docutils literal notranslate"><span class="pre">Channel</span></code> and <code class="xref py py-class docutils literal notranslate"><span class="pre">USCourtItem</span></code></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><em>Iterator</em>[<a class="reference internal" href="#model.USCourtItem" title="model.USCourtItem"><em>USCourtItem</em></a> | <a class="reference internal" href="#model.Channel" title="model.Channel"><em>Channel</em></a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="reader.capture">
<span class="sig-prename descclassname"><span class="pre">reader.</span></span><span class="sig-name descname"><span class="pre">capture</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">storage</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">feed</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#reader.capture" title="Link to this definition">¶</a></dt>
<dd><p>Save this feed into JSON file in storage <code class="docutils literal notranslate"><span class="pre">{item.date}/{item.time.hour}/items.json</span></code>.</p>
<p>This transforms the publication date into <code class="docutils literal notranslate"><span class="pre">YYYYMMDD/HH</span></code> path to a file.
If the file exists, this is added to the content.</p>
<p>If the file doesn’t exist, it’s created.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>storage</strong> (<a class="reference internal" href="#storage.Storage" title="storage.Storage"><em>Storage</em></a>) – Where to stash history.</p></li>
<li><p><strong>feed</strong> (<em>Iterator</em><em>[</em><a class="reference internal" href="#model.USCourtItem" title="model.USCourtItem"><em>USCourtItem</em></a><em> | </em><a class="reference internal" href="#model.Channel" title="model.Channel"><em>Channel</em></a><em>]</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="reader.reader">
<span class="sig-prename descclassname"><span class="pre">reader.</span></span><span class="sig-name descname"><span class="pre">reader</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#reader.reader" title="Link to this definition">¶</a></dt>
<dd><p>Reads all RSS feeds and saves the items.
Uses <a class="reference internal" href="#common.get_config" title="common.get_config"><code class="xref py py-func docutils literal notranslate"><span class="pre">common.get_config()</span></code></a> to get the list of feeds and the storage class.
Uses <a class="reference internal" href="#reader.feed_iter" title="reader.feed_iter"><code class="xref py py-func docutils literal notranslate"><span class="pre">feed_iter()</span></code></a> to parse XML.
Uses <a class="reference internal" href="#reader.capture" title="reader.capture"><code class="xref py py-func docutils literal notranslate"><span class="pre">capture()</span></code></a> to preserve the <a class="reference internal" href="#model.USCourtItemDetail" title="model.USCourtItemDetail"><code class="xref py py-class docutils literal notranslate"><span class="pre">model.USCourtItemDetail</span></code></a> items.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="reader.cleaner">
<span class="sig-prename descclassname"><span class="pre">reader.</span></span><span class="sig-name descname"><span class="pre">cleaner</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#reader.cleaner" title="Link to this definition">¶</a></dt>
<dd><p>Removes all old files. The configuration file provides the window size.</p>
<p>Uses <a class="reference internal" href="#common.get_config" title="common.get_config"><code class="xref py py-func docutils literal notranslate"><span class="pre">common.get_config()</span></code></a> to get the list of feeds and the storage class.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-filter">
<span id="filter"></span><h3>Filter<a class="headerlink" href="#module-filter" title="Link to this heading">¶</a></h3>
<p>Filter application of the Feeder Reader.</p>
<figure class="align-default">
<img alt="https://www.plantuml.com/plantuml/svg/VP712i8m38RlUOhWIK5VG6HuykZ51v3QPREmjAF9a25xTwkRs7bOJw7vykV_oL7KHEsu0TiO4MIZzdvrIYnuEE3wjCKGxTsL6pnrtgeB7ejYWYlNACKb3cpWDdZoYg8Xcfhm2PZUA70P_s38E1_KLSwQZqGEdxF6R29L_CVMf5SRVENg9NS3G9vtjok-Zd2FgqYcb1N0bFBTpUb4f0tICIKeOtARR-YJfvyXsP97J6fpWPztW6IPaBZL7fduHb40ZkJBTB0N" src="https://www.plantuml.com/plantuml/svg/VP712i8m38RlUOhWIK5VG6HuykZ51v3QPREmjAF9a25xTwkRs7bOJw7vykV_oL7KHEsu0TiO4MIZzdvrIYnuEE3wjCKGxTsL6pnrtgeB7ejYWYlNACKb3cpWDdZoYg8Xcfhm2PZUA70P_s38E1_KLSwQZqGEdxF6R29L_CVMf5SRVENg9NS3G9vtjok-Zd2FgqYcb1N0bFBTpUb4f0tICIKeOtARR-YJfvyXsP97J6fpWPztW6IPaBZL7fduHb40ZkJBTB0N" />
</figure>
<p>The <a class="reference internal" href="#module-filter" title="filter"><code class="xref py py-func docutils literal notranslate"><span class="pre">filter()</span></code></a> uses <a class="reference internal" href="#module-common" title="common"><code class="xref py py-mod docutils literal notranslate"><span class="pre">common</span></code></a> to get the list of interesting docket numbers.</p>
<p>It scans the entire downloaded collection of items looking
for “interesting” docket.
It compares those with the history cache to see if
there have been changes.
When changes are found the cache is updated and notifications are sent.</p>
<dl class="py function">
<dt class="sig sig-object py" id="filter.match_items">
<span class="sig-prename descclassname"><span class="pre">filter.</span></span><span class="sig-name descname"><span class="pre">match_items</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">storage</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">targets</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">history</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">counts</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#filter.match_items" title="Link to this definition">¶</a></dt>
<dd><p>Examine all the items in storage, looking for interesting dockets.</p>
<p>The implementation is a sequence of filters…</p>
<p>Sadly, we’ve pre-empted the name <code class="docutils literal notranslate"><span class="pre">filter()</span></code> in this module.
Here’s the alternative design.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">source</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="nb">list</span><span class="p">[</span><span class="n">USCourtItemDetail</span><span class="p">],</span> <span class="n">storage</span><span class="o">.</span><span class="n">read_json</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">USCourtItemDetail</span><span class="p">))</span>
<span class="n">has_docket</span> <span class="o">=</span> <span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">item</span><span class="p">:</span> <span class="n">item</span><span class="o">.</span><span class="n">item</span><span class="o">.</span><span class="n">docket</span><span class="p">,</span> <span class="n">source</span><span class="p">)</span>
<span class="n">has_target</span> <span class="o">=</span> <span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">item</span><span class="p">:</span> <span class="nb">any</span><span class="p">(</span><span class="n">d</span> <span class="ow">in</span> <span class="n">item</span><span class="o">.</span><span class="n">item</span><span class="o">.</span><span class="n">docket</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">targets</span><span class="p">),</span> <span class="n">has_docket</span><span class="p">)</span>
<span class="n">novel</span> <span class="o">=</span> <span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">item</span><span class="p">:</span> <span class="n">item</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">history</span><span class="p">,</span> <span class="n">has_target</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>storage</strong> (<a class="reference internal" href="#storage.Storage" title="storage.Storage"><em>Storage</em></a>) – The persistent storage from which we can read data.</p></li>
<li><p><strong>path</strong> (<em>tuple</em><em>[</em><em>str</em><em>, </em><em>...</em><em>]</em>) – The path in storage to find <a class="reference internal" href="#model.USCourtItemDetail" title="model.USCourtItemDetail"><code class="xref py py-class docutils literal notranslate"><span class="pre">model.USCourtItemDetail</span></code></a> instances.</p></li>
<li><p><strong>targets</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>) – The various dockets that are interesting.</p></li>
<li><p><strong>history</strong> (<em>set</em><em>[</em><a class="reference internal" href="#model.USCourtItemDetail" title="model.USCourtItemDetail"><em>USCourtItemDetail</em></a><em>]</em>) – The previous state of the history, to see if this is new.</p></li>
<li><p><strong>coutns</strong> – A counter to update when something new is found.</p></li>
<li><p><strong>counts</strong> (<em>Counter</em><em>[</em><em>str</em><em>]</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><em>Iterator</em>[<a class="reference internal" href="#model.USCourtItemDetail" title="model.USCourtItemDetail"><em>USCourtItemDetail</em></a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="filter.filter">
<span class="sig-prename descclassname"><span class="pre">filter.</span></span><span class="sig-name descname"><span class="pre">filter</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#filter.filter" title="Link to this definition">¶</a></dt>
<dd><p>Reads the RSS data.
Uses <a class="reference internal" href="#common.get_config" title="common.get_config"><code class="xref py py-func docutils literal notranslate"><span class="pre">common.get_config()</span></code></a> to get the list of dockers, and the storage class,
and the notifier class.
Uses <a class="reference internal" href="#filter.match_items" title="filter.match_items"><code class="xref py py-func docutils literal notranslate"><span class="pre">match_items()</span></code></a> to get items on the interesting dockets.
Uses the give notifier to notify of changes.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-writer">
<span id="writer"></span><h3>Writer<a class="headerlink" href="#module-writer" title="Link to this heading">¶</a></h3>
<p>Writer application of the Feeder Reader.</p>
<figure class="align-default">
<img alt="https://www.plantuml.com/plantuml/svg/ZP712i8m38RlVOgmauA-W8onYti1lO_InfcvfgFj9YA-kuLDw2vpEONa-_yafFH1kZ2OJgXEUW-TbRecrgJGGvx3hZg0TUfEUW_Lm2gGPIYAcNuw2bWhF_v7UzaGoqW_yBNPEQ3fkoZQoBirJYXhUil80NomJZO8Rm4n9eFBL1EVX8kPYU8KQp3KolADchLPgKbBtCg5nvb7SfPDx2RLwtnh58l55ux7uhSTd21pABNFX10biewF-m8=" src="https://www.plantuml.com/plantuml/svg/ZP712i8m38RlVOgmauA-W8onYti1lO_InfcvfgFj9YA-kuLDw2vpEONa-_yafFH1kZ2OJgXEUW-TbRecrgJGGvx3hZg0TUfEUW_Lm2gGPIYAcNuw2bWhF_v7UzaGoqW_yBNPEQ3fkoZQoBirJYXhUil80NomJZO8Rm4n9eFBL1EVX8kPYU8KQp3KolADchLPgKbBtCg5nvb7SfPDx2RLwtnh58l55ux7uhSTd21pABNFX10biewF-m8=" />
</figure>
<p>The <a class="reference internal" href="#module-writer" title="writer"><code class="xref py py-func docutils literal notranslate"><span class="pre">writer()</span></code></a> uses <a class="reference internal" href="#module-common" title="common"><code class="xref py py-mod docutils literal notranslate"><span class="pre">common</span></code></a> to get the target output format.</p>
<p>This reads <em>all</em> the unique items from the data cache, organizes them, and then
emits all of them using the selected template.</p>
<p>It also looks for a <code class="docutils literal notranslate"><span class="pre">filter.json</span></code> with the dockets considered interesting by the filter.</p>
<dl class="py function">
<dt class="sig sig-object py" id="writer.load_indices">
<span class="sig-prename descclassname"><span class="pre">writer.</span></span><span class="sig-name descname"><span class="pre">load_indices</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">storage</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#writer.load_indices" title="Link to this definition">¶</a></dt>
<dd><blockquote>
<div><p>Reads all of the data files to organize items by court, docket, date, as well
those found by the <a class="reference internal" href="#module-filter" title="filter"><code class="xref py py-mod docutils literal notranslate"><span class="pre">filter</span></code></a> application.</p>
</div></blockquote>
<p>Here’s the transformation done by the <a class="reference internal" href="#writer.load_indices" title="writer.load_indices"><code class="xref py py-func docutils literal notranslate"><span class="pre">load_indices()</span></code></a> function.</p>
<blockquote>
<div><figure class="align-default">
<img alt="https://www.plantuml.com/plantuml/svg/ZL8zQyCm4DtrAmvDgI6TCWKS0lNW39bAXr9Aa2M5Af6bu3iFfVI_zoJRMbfeD9pktdsykvFsI6gWiVT2nEvYDS4hd-EnQHQxRHTDEh8zFbum1WaAmIXIGYpnKAtNARXjivQTIMJhvVafZWCTk41ZIJccqruX_dR0bm0-Eg5PCr5VxQJUnkx49QtuBjrESLb2_8i8jk0TKacOoqtNdIc9Cedxmi_Eansi4OloJrglRY2hoWNZjCMgohkTBTx6D1ilSJSFExVE24FBEAcxX2GejLkuCyXewOftbv-bVgCFfw_18jQRztfNABSWQL01pt7ekK3t2JugSvhTgmSfnDu6mt_c1m==" src="https://www.plantuml.com/plantuml/svg/ZL8zQyCm4DtrAmvDgI6TCWKS0lNW39bAXr9Aa2M5Af6bu3iFfVI_zoJRMbfeD9pktdsykvFsI6gWiVT2nEvYDS4hd-EnQHQxRHTDEh8zFbum1WaAmIXIGYpnKAtNARXjivQTIMJhvVafZWCTk41ZIJccqruX_dR0bm0-Eg5PCr5VxQJUnkx49QtuBjrESLb2_8i8jk0TKacOoqtNdIc9Cedxmi_Eansi4OloJrglRY2hoWNZjCMgohkTBTx6D1ilSJSFExVE24FBEAcxX2GejLkuCyXewOftbv-bVgCFfw_18jQRztfNABSWQL01pt7ekK3t2JugSvhTgmSfnDu6mt_c1m==" />
</figure>
<dl class="field-list simple">
<dt class="field-odd">param storage<span class="colon">:</span></dt>
<dd class="field-odd"><p>Storage for all items.</p>
</dd>
<dt class="field-even">return<span class="colon">:</span></dt>
<dd class="field-even"><p>a dictionary with a collection of mappings used to organize the presentation.</p>
</dd>
</dl>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>storage</strong> (<a class="reference internal" href="#storage.Storage" title="storage.Storage"><em>Storage</em></a>) – </p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>dict[str, dict[str, list[<a class="reference internal" href="#model.USCourtItemDetail" title="model.USCourtItemDetail"><em>USCourtItemDetail</em></a>]]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="writer.write_csv">
<span class="sig-prename descclassname"><span class="pre">writer.</span></span><span class="sig-name descname"><span class="pre">write_csv</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">indices</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#writer.write_csv" title="Link to this definition">¶</a></dt>
<dd><p>Writes a CSV-formatted extract of the “court” index.
This is written to standard output.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>indices</strong> (<em>dict</em><em>[</em><em>str</em><em>, </em><em>dict</em><em>[</em><em>str</em><em>, </em><em>list</em><em>[</em><a class="reference internal" href="#model.USCourtItemDetail" title="model.USCourtItemDetail"><em>USCourtItemDetail</em></a><em>]</em><em>]</em><em>]</em>) – Indices mapping created by <a class="reference internal" href="#writer.load_indices" title="writer.load_indices"><code class="xref py py-func docutils literal notranslate"><span class="pre">load_indices()</span></code></a></p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="writer.paginate_keys">
<span class="sig-prename descclassname"><span class="pre">writer.</span></span><span class="sig-name descname"><span class="pre">paginate_keys</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">keys</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">page_size</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#writer.paginate_keys" title="Link to this definition">¶</a></dt>
<dd><p>Decomposes the keys in an index into pages. Returns list of page number and start-end values.
This can be used to group keys into pages.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>keys</strong> (<em>list</em><em>[</em><em>Any</em><em>]</em>) – Keys to an index created by  <a class="reference internal" href="#writer.load_indices" title="writer.load_indices"><code class="xref py py-func docutils literal notranslate"><span class="pre">load_indices()</span></code></a></p></li>
<li><p><strong>page_size</strong> (<em>int</em>) – Page size.  A value of zero stops pagination and returns a [(1, (0, len))] list
of page numbers and start values.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>List of tuple[page number, tuple[start, end]] values.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list[tuple[int, tuple[int, int]]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="writer.write_template">
<span class="sig-prename descclassname"><span class="pre">writer.</span></span><span class="sig-name descname"><span class="pre">write_template</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">logger</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">format</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">page_size</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">indices</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#writer.write_template" title="Link to this definition">¶</a></dt>
<dd><p>Writes the <code class="docutils literal notranslate"><span class="pre">index.html</span></code>, and <code class="docutils literal notranslate"><span class="pre">index_page.html</span></code> files for the expected four keys
in the output from the <a class="reference internal" href="#writer.load_indices" title="writer.load_indices"><code class="xref py py-func docutils literal notranslate"><span class="pre">load_indices()</span></code></a> function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>logger</strong> (<em>Logger</em>) – A place to log interesting info.</p></li>
<li><p><strong>output</strong> (<a class="reference internal" href="#storage.Storage" title="storage.Storage"><em>Storage</em></a>) – The Storage to which the files will be written.</p></li>
<li><p><strong>format</strong> (<em>str</em>) – The format, “html” or “md”</p></li>
<li><p><strong>page_size</strong> (<em>int</em>) – The page size</p></li>
<li><p><strong>indices</strong> (<em>dict</em><em>[</em><em>str</em><em>, </em><em>dict</em><em>[</em><em>str</em><em>, </em><em>list</em><em>[</em><a class="reference internal" href="#model.USCourtItemDetail" title="model.USCourtItemDetail"><em>USCourtItemDetail</em></a><em>]</em><em>]</em><em>]</em>) – The output from the <a class="reference internal" href="#writer.load_indices" title="writer.load_indices"><code class="xref py py-func docutils literal notranslate"><span class="pre">load_indices()</span></code></a> function</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="writer.writer">
<span class="sig-prename descclassname"><span class="pre">writer.</span></span><span class="sig-name descname"><span class="pre">writer</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#writer.writer" title="Link to this definition">¶</a></dt>
<dd><p>Captures the RSS state as HTML or MD files.
Uses <a class="reference internal" href="#common.get_config" title="common.get_config"><code class="xref py py-func docutils literal notranslate"><span class="pre">common.get_config()</span></code></a> to get the format, page size, and the Storage class.
Uses <a class="reference internal" href="#writer.load_indices" title="writer.load_indices"><code class="xref py py-func docutils literal notranslate"><span class="pre">load_indices()</span></code></a> to gather the items.
Uses <a class="reference internal" href="#writer.write_template" title="writer.write_template"><code class="xref py py-func docutils literal notranslate"><span class="pre">write_template()</span></code></a> to write HTML or MD output.
Uses <a class="reference internal" href="#writer.write_csv" title="writer.write_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">write_csv()</span></code></a> to write CSV output.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

</section>
</section>
<section id="control">
<h2>Control<a class="headerlink" href="#control" title="Link to this heading">¶</a></h2>
<p>There are two overall control implementations.</p>
<ul class="simple">
<li><p>Local running is implemented via the <a class="reference internal" href="#module-monitor" title="monitor"><code class="xref py py-mod docutils literal notranslate"><span class="pre">monitor</span></code></a> module.</p></li>
<li><p>Lambda execution remains TBD. A <code class="xref py py-mod docutils literal notranslate"><span class="pre">handler</span></code> module is planned.</p></li>
</ul>
<section id="module-monitor">
<span id="monitor"></span><h3>Monitor<a class="headerlink" href="#module-monitor" title="Link to this heading">¶</a></h3>
<p>The top-level Feeder Reader contoller
when run in local model.</p>
<p>This will define and execute a periodic schedule of FeederReader work.</p>
<p>It leverages <a class="reference internal" href="#module-reader" title="reader"><code class="xref py py-mod docutils literal notranslate"><span class="pre">reader</span></code></a>, <a class="reference internal" href="#module-filter" title="filter"><code class="xref py py-mod docutils literal notranslate"><span class="pre">filter</span></code></a>, and <a class="reference internal" href="#module-writer" title="writer"><code class="xref py py-mod docutils literal notranslate"><span class="pre">writer</span></code></a>
to actually do the work.</p>
<dl class="py function">
<dt class="sig sig-object py" id="monitor.feeder_reader">
<span class="sig-prename descclassname"><span class="pre">monitor.</span></span><span class="sig-name descname"><span class="pre">feeder_reader</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#monitor.feeder_reader" title="Link to this definition">¶</a></dt>
<dd><p>The FeederReader Processing.</p>
<ol class="arabic simple">
<li><p><a class="reference internal" href="#reader.cleaner" title="reader.cleaner"><code class="xref py py-func docutils literal notranslate"><span class="pre">reader.cleaner()</span></code></a></p></li>
<li><p><a class="reference internal" href="#reader.reader" title="reader.reader"><code class="xref py py-func docutils literal notranslate"><span class="pre">reader.reader()</span></code></a></p></li>
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">reader.filter()</span></code></p></li>
<li><p><a class="reference internal" href="#writer.writer" title="writer.writer"><code class="xref py py-func docutils literal notranslate"><span class="pre">writer.writer()</span></code></a></p></li>
</ol>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="monitor.sched_builder">
<span class="sig-prename descclassname"><span class="pre">monitor.</span></span><span class="sig-name descname"><span class="pre">sched_builder</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">logger</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">options</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#monitor.sched_builder" title="Link to this definition">¶</a></dt>
<dd><p>Builds the schedule from the configuration options.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>logger</strong> (<em>Logger</em>) – A logger to write info</p></li>
<li><p><strong>options</strong> (<em>dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em>) – The options for the monitor.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="monitor.sched_runner">
<span class="sig-prename descclassname"><span class="pre">monitor.</span></span><span class="sig-name descname"><span class="pre">sched_runner</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#monitor.sched_runner" title="Link to this definition">¶</a></dt>
<dd><p>Run the schedule.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="monitor.main">
<span class="sig-prename descclassname"><span class="pre">monitor.</span></span><span class="sig-name descname"><span class="pre">main</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#monitor.main" title="Link to this definition">¶</a></dt>
<dd><p>Main program for the monitor.</p>
<p>Get the configuration. Build the schedule. Run the schedule.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

</section>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">RSS FDRDR</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="context.html">Context</a></li>
<li class="toctree-l1"><a class="reference internal" href="containers.html">Containers</a></li>
<li class="toctree-l1"><a class="reference internal" href="components.html">Components</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Code</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#infrastructure">Infrastructure</a></li>
<li class="toctree-l2"><a class="reference internal" href="#storage-and-notification">Storage and Notification</a></li>
<li class="toctree-l2"><a class="reference internal" href="#applications">Applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="#control">Control</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Install</a></li>
<li class="toctree-l1"><a class="reference internal" href="test.html">Test and Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="operate.html">Operate</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="components.html" title="previous chapter">Components</a></li>
      <li>Next: <a href="install.html" title="next chapter">Install</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023, S.Lott.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.2.6</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="_sources/code.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>